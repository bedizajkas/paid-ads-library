<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üî• Killer - And Not So Killer - Paid Ads Library | Powered by Relevance AI</title>
    
    <!-- Favicon - Relevance AI Logo -->
    <link rel="icon" type="image/svg+xml" href="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'%3E%3Cdefs%3E%3ClinearGradient id='grad' x1='0%25' y1='0%25' x2='100%25' y2='100%25'%3E%3Cstop offset='0%25' style='stop-color:%235e72e4;stop-opacity:1' /%3E%3Cstop offset='100%25' style='stop-color:%23825ee4;stop-opacity:1' /%3E%3C/linearGradient%3E%3C/defs%3E%3Crect width='100' height='100' rx='20' fill='url(%23grad)'/%3E%3Ccircle cx='35' cy='35' r='18' fill='white' opacity='0.9'/%3E%3Ccircle cx='55' cy='55' r='22' fill='white' opacity='0.7'/%3E%3C/svg%3E">
    
    <style>
        * {
            box-sizing: border-box;
        }
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Arial, sans-serif;
            margin: 0;
            padding: 0;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
        }
        .header {
            background: linear-gradient(135deg, #5e72e4 0%, #825ee4 100%);
            padding: 30px 20px;
            text-align: center;
            box-shadow: 0 4px 20px rgba(0,0,0,0.2);
            margin-bottom: 30px;
        }
        .header h1 {
            color: white;
            margin: 0;
            font-size: 42px;
            font-weight: 700;
            text-shadow: 0 2px 10px rgba(0,0,0,0.2);
        }
        .header .subtitle {
            color: rgba(255,255,255,0.9);
            margin-top: 8px;
            font-size: 16px;
            font-weight: 400;
        }
        .header .powered {
            color: rgba(255,255,255,0.7);
            margin-top: 10px;
            font-size: 13px;
            text-transform: uppercase;
            letter-spacing: 1px;
        }
        .container {
            max-width: 1600px;
            margin: 0 auto;
            padding: 0 20px 40px 20px;
        }
        .controls {
            background: white;
            padding: 25px;
            border-radius: 12px;
            margin-bottom: 20px;
            box-shadow: 0 8px 30px rgba(0,0,0,0.15);
        }
        .controls h3 {
            margin-top: 0;
            color: #5e72e4;
            font-size: 18px;
            font-weight: 600;
        }
        textarea {
            width: 100%;
            height: 150px;
            margin-bottom: 15px;
            padding: 12px;
            font-family: 'Monaco', 'Courier New', monospace;
            font-size: 13px;
            border: 2px solid #e0e7ff;
            border-radius: 8px;
            resize: vertical;
            transition: border-color 0.2s;
        }
        textarea:focus {
            outline: none;
            border-color: #5e72e4;
        }
        button {
            background: linear-gradient(135deg, #5e72e4 0%, #825ee4 100%);
            color: white;
            border: none;
            padding: 14px 28px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 16px;
            font-weight: 600;
            transition: all 0.3s;
            box-shadow: 0 4px 15px rgba(94, 114, 228, 0.3);
        }
        button:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(94, 114, 228, 0.4);
        }
        button:active {
            transform: translateY(0px);
        }
        .clear-btn {
            background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
            box-shadow: 0 4px 15px rgba(245, 87, 108, 0.3);
        }
        .clear-btn:hover {
            box-shadow: 0 6px 20px rgba(245, 87, 108, 0.4);
        }
        @media (max-width: 600px) {
            button {
                width: 100%;
                margin: 5px 0;
            }
        }
        .image-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }
        .image-item {
            background: white;
            padding: 12px;
            border-radius: 12px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
            transition: all 0.3s;
        }
        .image-item:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 25px rgba(94, 114, 228, 0.2);
        }
        .image-item img {
            width: 100%;
            height: auto;
            display: block;
            border-radius: 8px;
            cursor: pointer;
        }
        .image-item .label {
            text-align: center;
            margin-top: 10px;
            font-size: 13px;
            color: #5e72e4;
            font-weight: 600;
        }
        .status {
            text-align: center;
            margin: 20px 0;
            font-size: 18px;
            color: white;
            font-weight: 600;
            text-shadow: 0 2px 4px rgba(0,0,0,0.2);
        }
        .error-item {
            background: #ffe5e5 !important;
            border: 2px solid #f5576c;
        }
        .error-item img {
            opacity: 0.5;
        }
        .error-item .label {
            color: #f5576c !important;
        }
        /* Modal for full-size image view */
        .modal {
            display: none;
            position: fixed;
            z-index: 1000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0,0,0,0.9);
        }
        .modal-content {
            margin: auto;
            display: block;
            max-width: 90%;
            max-height: 90%;
            position: relative;
            top: 50%;
            transform: translateY(-50%);
        }
        .close {
            position: absolute;
            top: 20px;
            right: 35px;
            color: #f1f1f1;
            font-size: 40px;
            font-weight: bold;
            cursor: pointer;
            z-index: 1001;
        }
        .close:hover {
            color: #bbb;
        }
        /* Tab Navigation */
        .tabs {
            background: white;
            padding: 0;
            border-radius: 12px 12px 0 0;
            margin-bottom: 0;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
            display: flex;
            overflow: hidden;
        }
        .tab-button {
            flex: 1;
            padding: 20px;
            background: white;
            border: none;
            font-size: 16px;
            font-weight: 600;
            color: #666;
            cursor: pointer;
            transition: all 0.3s;
            border-bottom: 4px solid transparent;
            position: relative;
        }
        .tab-button:hover {
            background: #f8f9ff;
            color: #5e72e4;
        }
        .tab-button.active {
            background: linear-gradient(135deg, #5e72e4 0%, #825ee4 100%);
            color: white;
            border-bottom-color: #5e72e4;
            box-shadow: none;
        }
        .tab-button .count {
            display: inline-block;
            margin-left: 8px;
            padding: 2px 8px;
            background: rgba(255,255,255,0.2);
            border-radius: 12px;
            font-size: 13px;
        }
        .tab-button:not(.active) .count {
            background: #e0e7ff;
            color: #5e72e4;
        }
        /* Checkbox Styling */
        .image-checkbox-container {
            display: flex;
            align-items: center;
            justify-content: center;
            margin-top: 8px;
            padding: 8px;
            background: #f8f9ff;
            border-radius: 6px;
            cursor: pointer;
            transition: all 0.2s;
        }
        .image-checkbox-container:hover {
            background: #e0e7ff;
        }
        .image-checkbox-container input[type="checkbox"] {
            width: 18px;
            height: 18px;
            margin-right: 8px;
            cursor: pointer;
            accent-color: #38ef7d;
        }
        .image-checkbox-container label {
            font-size: 13px;
            color: #5e72e4;
            font-weight: 600;
            cursor: pointer;
            user-select: none;
        }
        .image-checkbox-container.checked {
            background: #f0fdf4;
            border: 2px solid #38ef7d;
        }
        .image-checkbox-container.checked label {
            color: #11998e;
        }
        /* Empty State */
        .empty-state {
            text-align: center;
            padding: 80px 20px;
            color: white;
        }
        .empty-state .icon {
            font-size: 64px;
            margin-bottom: 20px;
            opacity: 0.8;
        }
        .empty-state h2 {
            font-size: 28px;
            margin: 0 0 12px 0;
            font-weight: 600;
        }
        .empty-state p {
            font-size: 16px;
            opacity: 0.9;
            margin: 0 0 24px 0;
        }
        .empty-state button {
            background: white;
            color: #5e72e4;
            padding: 12px 24px;
            font-size: 16px;
            font-weight: 600;
        }
        .empty-state button:hover {
            background: #f8f9ff;
        }
        /* Smooth transitions */
        .image-item {
            animation: fadeIn 0.3s ease-in;
        }
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        .image-item.removing {
            animation: fadeOut 0.3s ease-out forwards;
        }
        @keyframes fadeOut {
            from { opacity: 1; transform: scale(1); }
            to { opacity: 0; transform: scale(0.8); }
        }
    </style>
</head>
<body>
    <div class="header">
        <h1>üî• Killer - And Not So Killer - Paid Ads Library</h1>
        <div class="subtitle">View all your AI-generated ad creatives in one place</div>
        <div class="powered">Powered by Relevance AI</div>
    </div>
    
    <div class="container">
    <!-- Tab Navigation -->
    <div class="tabs">
        <button class="tab-button active" onclick="switchTab('all')" id="tab-all">
            üìö All Images <span class="count" id="count-all">91</span>
        </button>
        <button class="tab-button" onclick="switchTab('nottobad')" id="tab-nottobad">
            ‚ú® Not Too Bad <span class="count" id="count-nottobad">0</span>
        </button>
    </div>
    
    <div class="controls">
        <h3>Paste Image URLs (one per line):</h3>
        <textarea id="urlInput" placeholder="https://userdata-f1db6c.stack.tryrelevance.com/conversation/files/image1.png&#10;https://userdata-f1db6c.stack.tryrelevance.com/conversation/files/image2.png&#10;https://userdata-f1db6c.stack.tryrelevance.com/conversation/files/image3.png&#10;..."></textarea>
        
        <div style="display: flex; gap: 10px; flex-wrap: wrap;">
            <button onclick="loadImages()">üì• Load Images</button>
            <button onclick="saveUrls()" style="background: linear-gradient(135deg, #11998e 0%, #38ef7d 100%); box-shadow: 0 4px 15px rgba(56, 239, 125, 0.3);">üíæ Save URLs</button>
            <button class="clear-btn" onclick="clearImages()">üóëÔ∏è Clear Display</button>
            <button class="clear-btn" onclick="deleteSavedUrls()" style="background: linear-gradient(135deg, #ee0979 0%, #ff6a00 100%);">üóëÔ∏è Delete Saved</button>
        </div>
        
        <div id="savedStatus" style="margin-top: 12px; padding: 10px; background: #f8f9ff; border-radius: 8px; border-left: 4px solid #5e72e4; display: none;">
            <p style="margin: 0; font-size: 13px; color: #666;">
                <span id="savedStatusText"></span>
            </p>
        </div>
        
        <div style="margin-top: 15px; padding: 12px; background: #f0fdf4; border-radius: 8px; border-left: 4px solid #38ef7d;">
            <p style="margin: 0; font-size: 13px; color: #666; margin-bottom: 8px;">
                üí° <strong>Local Use:</strong> Click "üíæ Save URLs" to store images in your browser. They'll load automatically every time you open this page!
            </p>
            <p style="margin: 0; font-size: 13px; color: #666;">
                üåê <strong>Share a Link:</strong> Want to share just a URL? Edit the <code>PERMANENT_URLS</code> section (line ~245), save, and upload to <a href="https://app.netlify.com/drop" target="_blank" style="color: #38ef7d; font-weight: 600; text-decoration: none;">Netlify Drop ‚Üó</a>
            </p>
        </div>
    </div>
    
    <div class="status" id="status"></div>
    
    <div class="image-grid" id="imageGrid"></div>
    </div>

    <!-- Modal for full-size image -->
    <div id="myModal" class="modal" onclick="closeModal()">
        <span class="close">&times;</span>
        <img class="modal-content" id="modalImg">
    </div>

    <script>
        // ============================================
        // AIRTABLE CONFIGURATION
        // ============================================
        const AIRTABLE_CONFIG = {
            baseId: 'appH225MnNuDNCFmB',
            token: 'patMnnspORUU83AJO.01fed27b5dbf5ebe8e8dda867f95ef0a14304eb94255380bd5dc4bc1a399d595',
            tableName: 'checked_images'
        };
        
        // ============================================
        // STATE MANAGEMENT
        // ============================================
        let currentTab = 'all';
        let checkedImages = new Set();
        let isLoadingFromAirtable = false;
        
        // üéØ FOR HOSTING: Paste your URLs here to embed them permanently
        // This makes them load for EVERYONE who visits your hosted link!
        const PERMANENT_URLS = [
            "https://userdata-f1db6c.stack.tryrelevance.com/conversation/files/73e77730-c937-4688-8e4f-950cb65289d0.png",
            "https://userdata-f1db6c.stack.tryrelevance.com/conversation/files/50390896-ec3b-4c1d-aafa-e80ac8209a57.png",
            "https://userdata-f1db6c.stack.tryrelevance.com/conversation/files/7aa981c5-b2ff-4d22-8244-01cab678206a.png",
            "https://userdata-f1db6c.stack.tryrelevance.com/conversation/files/539302ce-049c-43fe-985e-05c1c8603aa3.png",
            "https://userdata-f1db6c.stack.tryrelevance.com/conversation/files/8f677b11-bfe1-455b-863e-a3e4cb948411.png",
            "https://userdata-f1db6c.stack.tryrelevance.com/conversation/files/28480647-dc5b-4664-8ee0-65a91d23e54c.png",
            "https://userdata-f1db6c.stack.tryrelevance.com/conversation/files/1964f0c9-cfab-4ae1-b07c-9bea1b1cfd68.png",
            "https://userdata-f1db6c.stack.tryrelevance.com/conversation/files/f47c154c-3c1f-474c-af71-71157208a344.png",
            "https://userdata-f1db6c.stack.tryrelevance.com/conversation/files/25f8ddfb-b7a4-42b3-8ef9-1512f577dfd1.png",
            "https://userdata-f1db6c.stack.tryrelevance.com/conversation/files/b0b5e456-fe86-4962-a0f5-7aa3559dfdce.png",
            "https://userdata-f1db6c.stack.tryrelevance.com/conversation/files/2a201018-dcd0-4d37-90ab-3a7bf4652811.png",
            "https://userdata-f1db6c.stack.tryrelevance.com/conversation/files/f0d7f90b-205c-4901-ba32-db7dd36da49f.png",
            "https://userdata-f1db6c.stack.tryrelevance.com/conversation/files/94b1e1f9-06c0-48a4-b3c0-22bc2fb0dd42.png",
            "https://userdata-f1db6c.stack.tryrelevance.com/conversation/files/fcab800f-f237-4f50-bb4b-304e6a3b16ef.png",
            "https://userdata-f1db6c.stack.tryrelevance.com/conversation/files/fe63ab09-de11-4efc-9107-c37168f6aad9.png",
            "https://userdata-f1db6c.stack.tryrelevance.com/conversation/files/4f184ce7-3136-407e-9db8-b0c34bf5b0a6.png",
            "https://userdata-f1db6c.stack.tryrelevance.com/conversation/files/a3f39043-5fca-4b75-8511-b6180313a499.png",
            "https://userdata-f1db6c.stack.tryrelevance.com/conversation/files/db8c0df8-ab23-4c4c-b5bb-1df2be007226.png",
            "https://userdata-f1db6c.stack.tryrelevance.com/conversation/files/00c777e5-6dcf-4c3c-9d7d-754eaac83f1b.png",
            "https://userdata-f1db6c.stack.tryrelevance.com/conversation/files/c2c53599-bfe7-41ea-bbac-f1a73fa0f95d.png",
            "https://userdata-f1db6c.stack.tryrelevance.com/conversation/files/a69989e6-8d96-499e-a571-36bea9fdc917.png",
            "https://userdata-f1db6c.stack.tryrelevance.com/conversation/files/5ca66eec-dd6f-4689-9a8a-30fc84cdb3d0.png",
            "https://userdata-f1db6c.stack.tryrelevance.com/conversation/files/e253631c-c7db-4f42-971b-c6566d39b5bc.png",
            "https://userdata-f1db6c.stack.tryrelevance.com/conversation/files/2f4d6dbe-1e3b-4005-9c9a-f97b0b67f460.png",
            "https://userdata-f1db6c.stack.tryrelevance.com/conversation/files/64ab2672-d39b-4694-9ee0-5ab8e380e27a.png",
            "https://userdata-f1db6c.stack.tryrelevance.com/conversation/files/c2024bfd-f077-4326-8d92-32df79f2ee9a.png",
            "https://userdata-f1db6c.stack.tryrelevance.com/conversation/files/edb2854a-2a7f-4df1-bd03-c395c7fe203d.png",
            "https://userdata-f1db6c.stack.tryrelevance.com/conversation/files/a04174dc-3b90-41b4-8f66-a71efb0883fc.png",
            "https://userdata-f1db6c.stack.tryrelevance.com/conversation/files/e7a0588e-5804-4b73-843b-94b6c4e5474f.png",
            "https://userdata-f1db6c.stack.tryrelevance.com/conversation/files/f7e57c13-26ad-4446-9a57-3f97125a5faf.png",
            "https://userdata-f1db6c.stack.tryrelevance.com/conversation/files/12b10920-9765-4cd9-8378-9e6333655201.png",
            "https://userdata-f1db6c.stack.tryrelevance.com/conversation/files/cdeadd31-c1f9-4cd5-ab95-ec36b7cce3b7.png",
            "https://userdata-f1db6c.stack.tryrelevance.com/conversation/files/c65394ce-1e3b-4d28-ab1a-7f0743070408.png",
            "https://userdata-f1db6c.stack.tryrelevance.com/conversation/files/becdadd6-2241-46eb-9bef-8c4024a44ecb.png",
            "https://userdata-f1db6c.stack.tryrelevance.com/conversation/files/2c06842e-9326-4634-a35a-bb595a05845f.png",
            "https://userdata-f1db6c.stack.tryrelevance.com/conversation/files/3a112416-554c-4ca3-870b-0185db483744.png",
            "https://userdata-f1db6c.stack.tryrelevance.com/conversation/files/2610d699-dd97-43e8-8aed-f96ebfd00735.png",
            "https://userdata-f1db6c.stack.tryrelevance.com/conversation/files/96db7cc8-0cee-4983-9273-d0668d7b74fd.png",
            "https://userdata-f1db6c.stack.tryrelevance.com/conversation/files/45695095-f271-40f6-8828-c49cbb8a2d81.png",
            "https://userdata-f1db6c.stack.tryrelevance.com/conversation/files/3036528f-39d2-403e-b63c-0b4845f735d6.png",
            "https://userdata-f1db6c.stack.tryrelevance.com/conversation/files/903fae5d-befe-483a-9547-3e323d806428.png",
            "https://userdata-f1db6c.stack.tryrelevance.com/conversation/files/c326ee2c-7bf9-47f9-a31e-0f31d61904ae.png",
            "https://userdata-f1db6c.stack.tryrelevance.com/conversation/files/e71cff93-ae6f-4921-85a2-91152b593552.png",
            "https://userdata-f1db6c.stack.tryrelevance.com/conversation/files/5ad8848d-c0bf-41f2-acc3-58b749f04083.png",
            "https://userdata-f1db6c.stack.tryrelevance.com/conversation/files/e8c91562-9ec3-4371-b5db-68649a119bb8.png",
            "https://userdata-f1db6c.stack.tryrelevance.com/conversation/files/c53d07fa-a76c-44ab-8611-60bc38cbfc06.png",
            "https://userdata-f1db6c.stack.tryrelevance.com/conversation/files/a7ef1736-efb4-4ecf-8dc8-21b1906ab394.png",
            "https://userdata-f1db6c.stack.tryrelevance.com/conversation/files/d692827c-57ab-4cb9-9959-476fa82045ee.png",
            "https://userdata-f1db6c.stack.tryrelevance.com/conversation/files/cdf598e4-7126-404d-b338-bd195734eb36.png",
            "https://userdata-f1db6c.stack.tryrelevance.com/conversation/files/b788d5ec-4a46-4a41-945e-0b8bbb3690e8.png",
            "https://userdata-f1db6c.stack.tryrelevance.com/conversation/files/648dc14b-147d-4238-81e2-17cea4d8e09b.png",
            "https://userdata-f1db6c.stack.tryrelevance.com/conversation/files/cdf294f0-0e03-4272-8f35-e1c0f668b927.png",
            "https://userdata-f1db6c.stack.tryrelevance.com/conversation/files/d4d25a6d-dd8f-4517-9df5-b29b693c94d6.png",
            "https://userdata-f1db6c.stack.tryrelevance.com/conversation/files/2a721e67-8028-43b7-8e4d-53f750d32881.png",
            "https://userdata-f1db6c.stack.tryrelevance.com/conversation/files/0e4a0bf2-aecb-473e-a5e9-6aa79920c7c1.png",
            "https://userdata-f1db6c.stack.tryrelevance.com/conversation/files/2f1fd413-a108-4037-bf2b-0895204163fe.png",
            "https://userdata-f1db6c.stack.tryrelevance.com/conversation/files/824d5071-2c64-43f9-a954-b961fe085674.png",
            "https://userdata-f1db6c.stack.tryrelevance.com/conversation/files/e1b5617d-f95f-43db-b830-b804736f8c3e.png",
            "https://userdata-f1db6c.stack.tryrelevance.com/conversation/files/0d9a1aad-db9c-442b-a84f-c486a9d3f2b7.png",
            "https://userdata-f1db6c.stack.tryrelevance.com/conversation/files/a23709c5-b0bf-4903-a9a0-81d558ef5f57.png",
            "https://userdata-f1db6c.stack.tryrelevance.com/conversation/files/850c95e1-37ec-4fe8-9b8c-8699f34e7201.png",
            "https://userdata-f1db6c.stack.tryrelevance.com/conversation/files/6456f220-3446-451e-877d-a0cd1eb41848.png",
            "https://userdata-f1db6c.stack.tryrelevance.com/conversation/files/2fce825c-3c95-4e62-951c-6d2c18545bf8.png",
            "https://userdata-f1db6c.stack.tryrelevance.com/conversation/files/02ae5370-a43a-4133-8e6b-1c9334504e02.png",
            "https://userdata-f1db6c.stack.tryrelevance.com/conversation/files/e271b0a1-e405-4d5e-bcbb-61e5563cf7fa.png",
            "https://userdata-f1db6c.stack.tryrelevance.com/conversation/files/deac8d18-f2e0-42e8-a45f-831782fd4a73.png",
            "https://userdata-f1db6c.stack.tryrelevance.com/conversation/files/35105af4-fb12-43d7-953d-fcffc5c19ad5.png",
            "https://userdata-f1db6c.stack.tryrelevance.com/conversation/files/c0370721-cb6c-4f38-b530-9d0f0f9c5ee4.png",
            "https://userdata-f1db6c.stack.tryrelevance.com/conversation/files/62925df4-24c2-4faf-b968-fa4e43c41fca.png",
            "https://userdata-f1db6c.stack.tryrelevance.com/conversation/files/332a2907-3a0b-47d3-a844-2e5726834769.png",
            "https://userdata-f1db6c.stack.tryrelevance.com/conversation/files/cb68e8d2-219a-4650-8cd7-15427da3e573.png",
            "https://userdata-f1db6c.stack.tryrelevance.com/conversation/files/550c3f38-7251-4150-9872-1c626d28a626.png",
            "https://userdata-f1db6c.stack.tryrelevance.com/conversation/files/8fd21b6c-69eb-4626-a3dd-2a6d135d1a07.png",
            "https://userdata-f1db6c.stack.tryrelevance.com/conversation/files/c30e6e4f-0a2b-48ae-8867-7e3dbbc0ed3a.png",
            "https://userdata-f1db6c.stack.tryrelevance.com/conversation/files/367f6c2d-4f4e-45c8-928c-b81c163349cd.png",
            "https://userdata-f1db6c.stack.tryrelevance.com/conversation/files/5341282e-3ac9-46a1-90d8-e0a608141cd9.png",
            "https://userdata-f1db6c.stack.tryrelevance.com/conversation/files/8fbb6ce6-2710-44b1-bec2-2e364083e1c3.png",
            "https://userdata-f1db6c.stack.tryrelevance.com/conversation/files/8da776a6-1a3b-435c-86e1-33a1f9fae3ce.png",
            "https://userdata-f1db6c.stack.tryrelevance.com/conversation/files/05bb8404-713e-474a-bf23-c06ddf2b179a.png",
            "https://userdata-f1db6c.stack.tryrelevance.com/conversation/files/16924737-ef85-4f05-adb7-dedecac57ab9.png",
            "https://userdata-f1db6c.stack.tryrelevance.com/conversation/files/b9f22573-f9e2-4d0c-a319-f38d45e09e42.png",
            "https://userdata-f1db6c.stack.tryrelevance.com/conversation/files/9108e924-43f6-4cb4-94b8-b0c87517be24.png",
            "https://userdata-f1db6c.stack.tryrelevance.com/conversation/files/35043b08-cc0a-4f3f-b042-536cac0b3e60.png",
            "https://userdata-f1db6c.stack.tryrelevance.com/conversation/files/12513bad-5bb9-494d-9065-0e49ec4b1652.png",
            "https://userdata-f1db6c.stack.tryrelevance.com/conversation/files/f4c57958-9942-4b17-b035-c02d0947c9d8.png",
            "https://userdata-f1db6c.stack.tryrelevance.com/conversation/files/3c52bd05-b209-44b9-af10-82d75ea2c93a.png",
            "https://userdata-f1db6c.stack.tryrelevance.com/conversation/files/f3ae096a-6235-429e-904e-367d58c0ddb4.png",
            "https://userdata-f1db6c.stack.tryrelevance.com/conversation/files/72476c68-2f40-4dc9-b52e-fa186bf38620.png",
            "https://userdata-f1db6c.stack.tryrelevance.com/conversation/files/0e810f60-7684-4403-9935-b28ceebbafa0.png",
            "https://userdata-f1db6c.stack.tryrelevance.com/conversation/files/37e96359-708b-4407-ad2e-7345924f6248.png",
            "https://userdata-f1db6c.stack.tryrelevance.com/conversation/files/cee4e77e-950c-4b6e-a9e6-c4e3a2ed4321.png",
            "https://userdata-f1db6c.stack.tryrelevance.com/conversation/files/c95db9e2-f047-48f8-a0e6-4eb3178c1b3a.png",
            "https://userdata-f1db6c.stack.tryrelevance.com/conversation/files/fd55b2a9-2fc2-4249-85c6-9476436334c1.png",
            "https://userdata-f1db6c.stack.tryrelevance.com/conversation/files/3d55a52a-0fa7-4762-aa7d-97be07a96b53.png",
            "https://userdata-f1db6c.stack.tryrelevance.com/conversation/files/af12576b-e5e7-46fe-af63-07b2d77ee840.png",
            "https://userdata-f1db6c.stack.tryrelevance.com/conversation/files/bca30940-fc12-4249-8ffb-92b123b85be6.png",
            "https://userdata-f1db6c.stack.tryrelevance.com/conversation/files/16ff8abf-6b92-48c8-99a9-d3c360df57be.png",
            "https://userdata-f1db6c.stack.tryrelevance.com/conversation/files/44cf918c-691a-4461-817b-6be74ed5dfd4.png",
            "https://userdata-f1db6c.stack.tryrelevance.com/conversation/files/293412cb-e20d-4087-bea8-f2b1256d80b5.png",
            "https://userdata-f1db6c.stack.tryrelevance.com/conversation/files/c410ebd9-e2f5-43b4-b46e-0082da583a52.png",
            "https://userdata-f1db6c.stack.tryrelevance.com/conversation/files/b8aa5754-608e-4b6d-b2f6-fecd2051eef7.png",
            "https://userdata-f1db6c.stack.tryrelevance.com/conversation/files/c6d20bf2-0588-4e44-a3d4-d3eecea9447c.png",
            "https://userdata-f1db6c.stack.tryrelevance.com/conversation/files/792783cd-2283-41f5-882e-7727f68ab75e.png",
            "https://userdata-f1db6c.stack.tryrelevance.com/conversation/files/c9a18484-ca13-4ddd-bc45-ad675c1d2892.png",
            "https://userdata-f1db6c.stack.tryrelevance.com/conversation/files/08280bdb-fbf1-4876-abab-5f8ad6f16f96.png",
            "https://userdata-f1db6c.stack.tryrelevance.com/conversation/files/769a0932-ab7e-40a3-95db-85d694d92700.png",
            "https://userdata-f1db6c.stack.tryrelevance.com/conversation/files/022fe898-83d1-429e-a7b4-486d472fa5a6.png",
            "https://userdata-f1db6c.stack.tryrelevance.com/conversation/files/27e65271-318f-43e6-8c8c-adf2d8abebcc.png",
            "https://userdata-f1db6c.stack.tryrelevance.com/conversation/files/bce7db17-80ca-4c2e-b54b-2f8eabcef06a.png",
            "https://userdata-f1db6c.stack.tryrelevance.com/conversation/files/d23c7b4a-5d2e-4ae1-8809-3431734c6270.png",
            "https://userdata-f1db6c.stack.tryrelevance.com/conversation/files/7eef006e-f9b4-4381-b401-39a6cc6f5b5a.png",
            "https://userdata-f1db6c.stack.tryrelevance.com/conversation/files/337ae31b-2080-44cc-bf6b-20a58708de2c.png",
            "https://userdata-f1db6c.stack.tryrelevance.com/conversation/files/2aa93902-8628-41eb-b999-706fa4232bba.png",
            "https://userdata-f1db6c.stack.tryrelevance.com/conversation/files/9a8c796a-d069-47f4-9782-f131e89ad934.png",
            "https://userdata-f1db6c.stack.tryrelevance.com/conversation/files/abda318e-19f8-4e46-837c-1fc01c1852f5.png",
            "https://userdata-f1db6c.stack.tryrelevance.com/conversation/files/321bcf59-4a11-4610-9784-e87990207a24.png",
            "https://userdata-f1db6c.stack.tryrelevance.com/conversation/files/ef3a2464-b32b-4da0-9731-d624c529f6a3.png",
            "https://userdata-f1db6c.stack.tryrelevance.com/conversation/files/7718c18f-f8b2-44a5-8a25-2beb5ed8f49f.png",
            "https://userdata-f1db6c.stack.tryrelevance.com/conversation/files/bc0f028c-5e1c-4abd-9d5b-9b1ad03a66c9.png"
        ];
        
        // ============================================
        // AIRTABLE API FUNCTIONS
        // ============================================
        async function loadCheckedImagesFromAirtable() {
            const url = `https://api.airtable.com/v0/${AIRTABLE_CONFIG.baseId}/${AIRTABLE_CONFIG.tableName}`;
            
            console.log('üîÑ Loading from Airtable...');
            
            try {
                const response = await fetch(url, {
                    headers: {
                        'Authorization': `Bearer ${AIRTABLE_CONFIG.token}`
                    }
                });
                
                console.log('üì° Airtable response status:', response.status);
                
                if (!response.ok) {
                    const errorText = await response.text();
                    console.error('‚ùå Airtable API error:', response.status, errorText);
                    throw new Error(`Airtable API error: ${response.status} - ${errorText}`);
                }
                
                const data = await response.json();
                console.log('üì¶ Airtable data received:', data.records ? data.records.length : 0, 'records');
                
                const urls = data.records.map(record => record.fields.image_url).filter(Boolean);
                checkedImages = new Set(urls);
                
                // Also save to localStorage as cache
                saveCheckedImagesToLocalStorage();
                
                console.log(`‚úÖ Successfully loaded ${checkedImages.size} checked images from Airtable`);
                
                // Show success message
                const status = document.getElementById('status');
                if (status) {
                    status.textContent = `‚úÖ Synced ${checkedImages.size} "Not Too Bad" selections from Airtable`;
                }
                
                return true;
            } catch (error) {
                console.error('‚ùå Failed to load from Airtable:', error);
                console.log('üíæ Falling back to localStorage...');
                
                // Fallback to localStorage
                loadCheckedImagesFromLocalStorage();
                
                // Show warning message
                const status = document.getElementById('status');
                if (status && checkedImages.size > 0) {
                    status.textContent = `‚ö†Ô∏è Using local data (${checkedImages.size} selections). Sync may be offline.`;
                }
                
                return false;
            }
        }
        
        async function addImageToAirtable(imageUrl) {
            const url = `https://api.airtable.com/v0/${AIRTABLE_CONFIG.baseId}/${AIRTABLE_CONFIG.tableName}`;
            
            console.log('‚ûï Adding to Airtable:', imageUrl.substring(0, 60) + '...');
            
            try {
                const response = await fetch(url, {
                    method: 'POST',
                    headers: {
                        'Authorization': `Bearer ${AIRTABLE_CONFIG.token}`,
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify({
                        records: [
                            {
                                fields: {
                                    image_url: imageUrl
                                }
                            }
                        ]
                    })
                });
                
                console.log('üì° Add response status:', response.status);
                
                if (!response.ok) {
                    const errorText = await response.text();
                    console.error('‚ùå Add failed:', response.status, errorText);
                    throw new Error(`Airtable API error: ${response.status} - ${errorText}`);
                }
                
                console.log(`‚úÖ Successfully added to Airtable`);
                return true;
            } catch (error) {
                console.error('‚ùå Error adding to Airtable:', error);
                alert(`‚ö†Ô∏è Could not sync to Airtable. Check console for details. Image saved locally.`);
                return false;
            }
        }
        
        async function removeImageFromAirtable(imageUrl) {
            // First, find the record ID
            const listUrl = `https://api.airtable.com/v0/${AIRTABLE_CONFIG.baseId}/${AIRTABLE_CONFIG.tableName}?filterByFormula={image_url}='${imageUrl}'`;
            
            try {
                const listResponse = await fetch(listUrl, {
                    headers: {
                        'Authorization': `Bearer ${AIRTABLE_CONFIG.token}`
                    }
                });
                
                if (!listResponse.ok) {
                    throw new Error(`Airtable API error: ${listResponse.status}`);
                }
                
                const data = await listResponse.json();
                
                if (data.records.length === 0) {
                    console.log('Record not found in Airtable');
                    return true;
                }
                
                // Delete the record
                const recordId = data.records[0].id;
                const deleteUrl = `https://api.airtable.com/v0/${AIRTABLE_CONFIG.baseId}/${AIRTABLE_CONFIG.tableName}/${recordId}`;
                
                const deleteResponse = await fetch(deleteUrl, {
                    method: 'DELETE',
                    headers: {
                        'Authorization': `Bearer ${AIRTABLE_CONFIG.token}`
                    }
                });
                
                if (!deleteResponse.ok) {
                    throw new Error(`Airtable API error: ${deleteResponse.status}`);
                }
                
                console.log(`‚úÖ Removed from Airtable: ${imageUrl.substring(0, 50)}...`);
                return true;
            } catch (error) {
                console.error('Error removing from Airtable:', error);
                return false;
            }
        }
        
        // ============================================
        // INITIALIZATION
        // ============================================
        window.addEventListener('load', async function() {
            // Show loading state
            document.getElementById('status').textContent = 'üîÑ Loading checked images...';
            
            // Load checked images from Airtable (with localStorage fallback)
            isLoadingFromAirtable = true;
            await loadCheckedImagesFromAirtable();
            isLoadingFromAirtable = false;
            
            // Load images based on priority
            if (PERMANENT_URLS.length > 0 && PERMANENT_URLS[0] && PERMANENT_URLS[0].startsWith('http')) {
                document.getElementById('urlInput').value = PERMANENT_URLS.join('\n');
                renderCurrentView();
            } else {
            const savedUrls = getSavedUrls();
            if (savedUrls.length > 0) {
                document.getElementById('urlInput').value = savedUrls.join('\n');
                    renderCurrentView();
                showSavedStatus(`‚úÖ ${savedUrls.length} images loaded from saved collection`, 'success');
                }
            }
            
            updateTabCounts();
        });
        
        // ============================================
        // TAB MANAGEMENT
        // ============================================
        function switchTab(tabName) {
            currentTab = tabName;
            
            // Update tab UI
            document.getElementById('tab-all').classList.remove('active');
            document.getElementById('tab-nottobad').classList.remove('active');
            document.getElementById(`tab-${tabName}`).classList.add('active');
            
            // Render appropriate view
            renderCurrentView();
        }
        
        function renderCurrentView() {
            const imagesToShow = currentTab === 'all' 
                ? PERMANENT_URLS 
                : PERMANENT_URLS.filter(url => checkedImages.has(url));
            
            if (imagesToShow.length === 0 && currentTab === 'nottobad') {
                showEmptyState();
            } else {
                displayImages(imagesToShow);
            }
        }
        
        function showEmptyState() {
            const grid = document.getElementById('imageGrid');
            const status = document.getElementById('status');
            
            status.textContent = '';
            grid.innerHTML = `
                <div class="empty-state">
                    <div class="icon">üòï</div>
                    <h2>No images marked yet</h2>
                    <p>Switch to "All Images" tab and check some images to see them here!</p>
                    <button onclick="switchTab('all')">üìö Go to All Images</button>
                </div>
            `;
        }
        
        function updateTabCounts() {
            document.getElementById('count-all').textContent = PERMANENT_URLS.length;
            document.getElementById('count-nottobad').textContent = checkedImages.size;
        }
        
        // ============================================
        // CHECKBOX MANAGEMENT
        // ============================================
        function loadCheckedImagesFromLocalStorage() {
            const saved = localStorage.getItem('notTooBadImages');
            if (saved) {
                try {
                    const urls = JSON.parse(saved);
                    checkedImages = new Set(urls);
                    console.log(`‚úÖ Loaded ${checkedImages.size} checked images from localStorage (fallback)`);
                } catch (e) {
                    console.error('Error loading checked images from localStorage:', e);
                    checkedImages = new Set();
                }
            }
        }
        
        function saveCheckedImagesToLocalStorage() {
            localStorage.setItem('notTooBadImages', JSON.stringify([...checkedImages]));
        }
        
        async function toggleImageCheck(imageUrl, checkbox) {
            const isChecked = checkbox.checked;
            const imageItem = checkbox.closest('.image-item');
            
            if (isChecked) {
                // Add to local state
                checkedImages.add(imageUrl);
                
                // Sync to Airtable
                await addImageToAirtable(imageUrl);
            } else {
                // Remove from local state
                checkedImages.delete(imageUrl);
                
                // Sync to Airtable
                await removeImageFromAirtable(imageUrl);
                
                // If on "Not Too Bad" tab, remove the card with animation
                if (currentTab === 'nottobad') {
                    imageItem.classList.add('removing');
                    setTimeout(() => {
                        imageItem.remove();
                        // Check if no images left
                        if (checkedImages.size === 0) {
                            showEmptyState();
                        }
                    }, 300);
                }
            }
            
            // Save to localStorage as cache
            saveCheckedImagesToLocalStorage();
            updateTabCounts();
        }
        
        // Save URLs to browser storage
        function saveUrls() {
            const urlInput = document.getElementById('urlInput').value;
            const urls = urlInput.split('\n').filter(url => url.trim() !== '');
            
            if (urls.length === 0) {
                alert('‚ö†Ô∏è Please paste some URLs first!');
                return;
            }
            
            // Save to localStorage
            localStorage.setItem('killerAdsUrls', JSON.stringify(urls));
            localStorage.setItem('killerAdsSavedDate', new Date().toISOString());
            
            showSavedStatus(`‚úÖ Successfully saved ${urls.length} image URLs! They'll load automatically next time.`, 'success');
            
            // Also load the images
            displayImages(urls);
        }
        
        // Get saved URLs from browser storage
        function getSavedUrls() {
            const saved = localStorage.getItem('killerAdsUrls');
            if (saved) {
                try {
                    return JSON.parse(saved);
                } catch (e) {
                    console.error('Error loading saved URLs:', e);
                    return [];
                }
            }
            return [];
        }
        
        // Delete saved URLs
        function deleteSavedUrls() {
            const savedUrls = getSavedUrls();
            if (savedUrls.length === 0) {
                alert('No saved URLs to delete!');
                return;
            }
            
            if (confirm(`Delete ${savedUrls.length} saved URLs? They won't load automatically anymore.`)) {
                localStorage.removeItem('killerAdsUrls');
                localStorage.removeItem('killerAdsSavedDate');
                showSavedStatus('üóëÔ∏è Saved URLs deleted', 'warning');
                clearImages();
            }
        }
        
        // Show save status message
        function showSavedStatus(message, type) {
            const statusDiv = document.getElementById('savedStatus');
            const statusText = document.getElementById('savedStatusText');
            
            statusText.textContent = message;
            statusDiv.style.display = 'block';
            
            // Change colors based on type
            if (type === 'success') {
                statusDiv.style.background = '#f0fdf4';
                statusDiv.style.borderLeftColor = '#38ef7d';
            } else if (type === 'warning') {
                statusDiv.style.background = '#fff7ed';
                statusDiv.style.borderLeftColor = '#ff6a00';
            }
            
            // Auto-hide after 5 seconds
            setTimeout(() => {
                statusDiv.style.display = 'none';
            }, 5000);
        }
        
        // ============================================
        // IMAGE LOADING & DISPLAY
        // ============================================
        function loadImages() {
            const urlInput = document.getElementById('urlInput').value;
            const urls = urlInput.split('\n').filter(url => url.trim() !== '');
            
            if (urls.length === 0) {
                alert('Please paste at least one URL');
                return;
            }
            
            // Update PERMANENT_URLS for this session
            PERMANENT_URLS.length = 0;
            PERMANENT_URLS.push(...urls);
            
            renderCurrentView();
            updateTabCounts();
        }
        
        // Display images from URL array with checkboxes
        function displayImages(urls) {
            const grid = document.getElementById('imageGrid');
            const status = document.getElementById('status');
            
            grid.innerHTML = '';
            status.textContent = `Loading ${urls.length} images...`;
            
            let loaded = 0;
            let failed = 0;
            
            urls.forEach((url, index) => {
                const item = document.createElement('div');
                item.className = 'image-item';
                item.setAttribute('data-url', url.trim());
                
                // Image element
                const img = document.createElement('img');
                img.src = url.trim();
                img.alt = `Image ${index + 1}`;
                
                img.onload = () => {
                    loaded++;
                    updateStatus(loaded, failed, urls.length);
                };
                
                img.onerror = () => {
                    failed++;
                    item.classList.add('error-item');
                    img.alt = 'Failed to load';
                    updateStatus(loaded, failed, urls.length);
                };
                
                img.onclick = () => openModal(url.trim());
                
                // Checkbox container
                const checkboxContainer = document.createElement('div');
                checkboxContainer.className = 'image-checkbox-container';
                const isChecked = checkedImages.has(url.trim());
                if (isChecked) {
                    checkboxContainer.classList.add('checked');
                }
                
                const checkbox = document.createElement('input');
                checkbox.type = 'checkbox';
                checkbox.id = `checkbox-${index}`;
                checkbox.checked = isChecked;
                checkbox.onchange = () => toggleImageCheck(url.trim(), checkbox);
                
                const label = document.createElement('label');
                label.htmlFor = `checkbox-${index}`;
                label.textContent = 'Not Too Bad';
                
                checkboxContainer.appendChild(checkbox);
                checkboxContainer.appendChild(label);
                
                // Label with number
                const numberLabel = document.createElement('div');
                numberLabel.className = 'label';
                numberLabel.textContent = `Image ${index + 1}`;
                
                // Assemble card
                item.appendChild(img);
                item.appendChild(checkboxContainer);
                item.appendChild(numberLabel);
                grid.appendChild(item);
                
                // Update checkbox container styling on change
                checkbox.addEventListener('change', () => {
                    if (checkbox.checked) {
                        checkboxContainer.classList.add('checked');
                    } else {
                        checkboxContainer.classList.remove('checked');
                    }
                });
            });
        }
        
        function updateStatus(loaded, failed, total) {
            const status = document.getElementById('status');
            if (loaded + failed === total) {
                status.textContent = `‚úÖ Loaded ${loaded} of ${total} images${failed > 0 ? ` (${failed} failed)` : ''}`;
            } else {
                status.textContent = `Loading ${loaded} of ${total} images...`;
            }
        }
        
        function clearImages() {
            document.getElementById('imageGrid').innerHTML = '';
            document.getElementById('status').textContent = '';
        }
        
        function openModal(url) {
            const modal = document.getElementById('myModal');
            const modalImg = document.getElementById('modalImg');
            modal.style.display = "block";
            modalImg.src = url;
        }
        
        function closeModal() {
            document.getElementById('myModal').style.display = "none";
        }
        
        // Keyboard shortcut: ESC to close modal
        document.addEventListener('keydown', function(event) {
            if (event.key === 'Escape') {
                closeModal();
            }
        });
    </script>
</body>
</html>

